(this["webpackJsonpchessbot-typescript"]=this["webpackJsonpchessbot-typescript"]||[]).push([[0],{10:function(e,t,n){"use strict";var o=n(2),s=n.n(o),c=function(e,t){return function(){var n=new Worker(e),o=null;return n.addEventListener("message",(function(e){var t=e.data.match(/^bestmove\s([a-h][1-8])([a-h][1-8])/);t&&o&&(o({from:t[1],to:t[2]}),o=null)})),function(e){return new Promise((function(s,c){o?c("Pending move is present"):(o=s,n.postMessage("ucinewgame"),n.postMessage("position fen ".concat(e)),t.forEach((function(e){return n.postMessage(e)})))}))}}},a={Random:function(){return function(e){return new Promise((function(t){var n=s()(e).moves({verbose:!0}),o=n[Math.floor(Math.random()*n.length)],c=o.from,a=o.to;setTimeout((function(){return t({from:c,to:a})}),500)}))}},"nmrugg/stockfish (l:1,d:10)":c("bots/stockfish.js-10.0.2/stockfish.js",["setoption name Skill Level value 1","go depth 10"]),"nmrugg/stockfish (l:20,d:10)":c("bots/stockfish.js-10.0.2/stockfish.js",["setoption name Skill Level value 20","go depth 10"]),"nmrugg/stockfish (l:20,t:1s)":c("bots/stockfish.js-10.0.2/stockfish.js",["setoption name Skill Level value 20","go movetime 1000"]),"op12no2/lozza (l:1,d:10)":c("bots/lozza-1.18/lozza.js",["setoption name Skill Level value 1","go depth 10"]),"op12no2/lozza (l:20,d:10)":c("bots/lozza-1.18/lozza.js",["setoption name Skill Level value 20","go depth 10"]),"op12no2/lozza (l:20,t:1s)":c("bots/lozza-1.18/lozza.js",["setoption name Skill Level value 20","go movetime 1000"])};t.a=a},12:function(e,t,n){"use strict";var o=n(11),s=n(4),c=n(0),a=n(1),r=n(9),i=n.n(r),l=n(2),u=n.n(l),f=function(){return"rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1"},b=function(e){return"b"===u()(e).turn()},j=function(e){return"w"===u()(e).turn()},v=n(3),m=n.n(v),p=function(e){var t=e.playerName,n=e.availableBots,o=e.selectedBot,s=e.setSelectedBot;return Object(c.jsxs)("div",{className:m.a.BotSelector,children:[Object(c.jsx)("label",{children:t}),Object(c.jsxs)("select",{value:null===o||void 0===o?void 0:o.name,onChange:function(e){var t=e.target.value;s(t?{name:t,move:n[t]()}:null)},children:[Object(c.jsx)("option",{value:"",children:"User"},"User"),Object.keys(n).map((function(e){return Object(c.jsx)("option",{children:e},e)}))]})]})},h=function(e){var t=e.history,n=Object(a.useRef)(null);return Object(a.useEffect)((function(){var e;null===(e=n.current)||void 0===e||e.scrollIntoView()}),[t]),Object(c.jsxs)("pre",{className:m.a.History,children:[t.map((function(e){var t=e.piece,n=e.color,o=e.from,s=e.san;return"".concat(n).concat(t).concat(o," ").concat(s)})).join("\n"),Object(c.jsx)("div",{ref:n})]})};t.a=function(e){var t=e.bots,n=e.onGameCompleted,r=Object(a.useState)(!1),l=Object(s.a)(r,2),v=l[0],d=l[1],O=Object(a.useState)(f),g=Object(s.a)(O,2),k=g[0],x=g[1],B=Object(a.useState)([]),S=Object(s.a)(B,2),_=S[0],y=S[1],z=Object(a.useState)(null),N=Object(s.a)(z,2),w=N[0],P=N[1],C=Object(a.useState)(null),q=Object(s.a)(C,2),L=q[0],M=q[1],R=function(){d(!1),x(f),y([])},E=function(e,t){var c=function(e,t,n){var o=u()(e),s=o.move({from:t,to:n,promotion:"q"});return s?[o.fen(),s]:null}(k,e,t);if(c){var a=Object(s.a)(c,2),r=a[0],i=a[1];if(function(e){return u()(e).game_over()}(r))return n(function(e){var t=u()(e);return t.in_checkmate()?"w"===t.turn()?"b":"w":null}(r)),void R();x(r),y((function(e){return[].concat(Object(o.a)(e),[i])}))}};return Object(a.useEffect)((function(){if(v){var e=!0;return w&&j(k)&&w.move(k).then((function(t){var n=t.from,o=t.to;e&&E(n,o)})),L&&b(k)&&L.move(k).then((function(t){var n=t.from,o=t.to;e&&E(n,o)})),function(){e=!1}}}),[v,k,w,L]),Object(c.jsxs)("div",{className:m.a.App,children:[Object(c.jsx)("header",{children:Object(c.jsx)("h1",{children:"\u265b Chessbot"})}),Object(c.jsxs)("div",{className:m.a.TopNav,children:[Object(c.jsx)(p,{playerName:"White",availableBots:t,selectedBot:w,setSelectedBot:P}),Object(c.jsx)(p,{playerName:"Black",availableBots:t,selectedBot:L,setSelectedBot:M}),Object(c.jsx)("button",{className:m.a.Button,onClick:function(){return d((function(e){return!e}))},children:v?"Pause":"Play"}),Object(c.jsx)("button",{className:m.a.Button,onClick:R,children:"Reset"})]}),Object(c.jsx)("div",{className:m.a.Chessboard,children:Object(c.jsx)(i.a,{position:k,allowDrag:function(e){var t=e.sourceSquare,n=w&&j(k),o=L&&b(k);return v&&function(e,t){return new u.a(e).moves({square:t}).length>0}(k,t)&&!(n||o)},onDrop:function(e){var t=e.sourceSquare,n=e.targetSquare;E(t,n)}})}),Object(c.jsx)(h,{history:_})]})}},13:function(e,t,n){"use strict";n.r(t),function(e){var t=n(0),o=n(1),s=n.n(o),c=n(8),a=n.n(c),r=n(12),i=n(10);n(23);a.a.render(Object(t.jsx)(s.a.StrictMode,{children:Object(t.jsx)(r.a,{bots:i.a,onGameCompleted:function(t){e.alert("".concat("b"===t?"Black":"w"===t?"White":"No one"," is the winner!"))}})}),document.getElementById("root"))}.call(this,n(14))},23:function(e,t,n){},3:function(e,t,n){e.exports={App:"styles_App__fFNuF",TopNav:"styles_TopNav__3Zi02",Button:"styles_Button__3HbKX",BotSelector:"styles_BotSelector__1sHbn",Chessboard:"styles_Chessboard__owj1A",History:"styles_History__7Rgl8"}}},[[13,1,2]]]);
//# sourceMappingURL=main.3d8ecd18.chunk.js.map